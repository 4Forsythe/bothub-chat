## BotHub Chat App

**[Ready hosting](https://bothub-chat-app.vercel.app)**

**P.S.** Пока выбирал домен, кажется, наткнулся на ваш **[Storybook](https://bothub-chat.vercel.app)**

### Usage

Для запуска локального приложения используются **скрипты NPM**:

- `npm run build` + `npm run start`

или просто `npm run dev` для dev-режима

### Tech-Stack

За основу проекта был взят сборщик **[Vite](https://vite.dev)** с темплейтом **React TypeScript**

Сторонние библиотеки/пакеты:

- **[Redux Toolkit](https://redux-toolkit.js.org)** - стейт-менеджер (совместно с react-redux)
- **[RTK Query](https://redux-toolkit.js.org/rtk-query/overview)** - апи с готовыми запросами/кешами/инвалидацией
- **[EventSource](https://www.npmjs.com/package/eventsource)** (именно как пакет) - стандартное апи JS не позволяет использовать встроенный класс EventSource совместно с любыми заголовками. Поскольку по условиям тестового задания нужно было использовать заголовок **Authorization (Bearer)** для доступа к методам апи, пришлось найти альтернативное решение (эндпоинт /stream для сообщений недоступен без токена)
- **[Styled Components](https://styled-components.com)** - стилизация компонентов в формате **CSS-in-JS**
- **[Sonner](https://sonner.emilkowal.ski)** - небольшая библиотека для тостеров/пушей
- **[React Transition Group](https://www.npmjs.com/package/react-transition-group)** - реализация плавных переходов ДО очистки элемента из DOM-дерева
- **[React Markdown](https://www.npmjs.com/package/react-markdown)** (совместно с **rehype-sanitize** плагином) - для преобразования текста в формат Markdown (используется в чате с ботом)
- **[Lucide](https://lucide.dev)** - пакет с набором иконок

Все заимствованные библиотеки довольно популярны и **использованы строго по назначению**

Для всех альтернативных/собственных решений были написаны **хуки и хелперы**

### Comments

В качестве основного инструмента для работы с асинхронщиной использовал RTK Query, поскольку, считаю, что это лучший выбор для быстрого и чистого написания запросов апи и мутаций

> Стейт-менеджер Toolkit для хранения и реализации бизнес-логики чатов/сообщений НЕ ИСПОЛЬЗУЕТСЯ, поскольку для этих целей предназначены кеши RTK Query!

> Однако в entities имеется два слайса Redux, которые выполняют собственную небольшую логику, так что технически условия тестового задания \*об использовании стейт-менеджера\*\* были выполнены

Для реализации realtime обновлений сообщений бота использовал собственный хук useChatSSE, который выполнял обновление кеша для сообщения чата каждый раз, когда приходил потоковый ответ от SSE-ивента

#### Bugs probably

Логика выбора модели чат-бота при создании нового чата реализована при помощи select-компонента, однако я заметил, что боты с другими предустановленными моделями (помимо gpt) некорректно отвечают пользователю: Midjourney отправляет сообщения, которые _вечно_ находятся в статусе PENDING, а остальные просто отправляют _нулевые_ значения в ответ

### End

Спасибо за внимание, будьте строги и справедливы при оценивании)
